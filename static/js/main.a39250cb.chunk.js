(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{12:function(e,t,r){},34:function(e,t,r){"use strict";r.r(t);var s=r(1),c=r(8),n=r.n(c),a=r(2),o=r(4),u=r(14),i=r(19),l="GET_USERS",b="GET_USERID",j="GET_ERROR",m="OPEN_FORM",d="CORRECT_FORM",O="GET_START",_=function(e){return{type:l,users:e}},p=function(e){return{type:b,userId:e}},h=function(e){return{type:j,messageError:e}},f=function(e){return{type:m,isOpenForm:e}},x=function(e){return{type:d,isCorrectForm:e}},N=function(e){return{type:O,start:e}},v=function(e){return e.users},F=function(e){return e.userId},U=function(e){return e.messageError},y=function(e){return e.isOpenForm},g=function(e){return e.isCorrectForm},T=function(e){return e.start},C={users:[],userId:0,messageError:"",isOpenForm:!1,isCorrectForm:!1,start:0},S=Object(u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case b:return Object(o.a)(Object(o.a)({},e),{},{userId:t.userId});case j:return Object(o.a)(Object(o.a)({},e),{},{messageError:t.messageError});case m:return Object(o.a)(Object(o.a)({},e),{},{isOpenForm:t.isOpenForm});case d:return Object(o.a)(Object(o.a)({},e),{},{isCorrectForm:t.isCorrectForm});case O:return Object(o.a)(Object(o.a)({},e),{},{start:t.start});default:return e}}),Object(i.composeWithDevTools)()),E=r(5),k=r.n(E),I=r(7),w=function(){var e=Object(I.a)(k.a.mark((function e(t,r){var s,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://23.88.43.148").concat(t),r);case 2:return s=e.sent,e.next=5,s.json().catch((function(e){throw Error("".concat(e))}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(I.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/users",{method:"GET"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){return t=e,w("/users",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)});var t},B=function(e,t){return r="/user/".concat(e),s=t,w(r,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(s)});var r,s},A=function(e){return t="/user/".concat(e),w(t,{method:"DELETE"});var t},P=r(10),G=r(3),J=r(11),M=r.n(J),q=(r(12),r(0)),L=function(){var e=Object(a.c)(y),t=Object(a.c)(g),r=Object(a.c)(F),c=Object(a.c)(v),n=Object(a.b)(),o=Object(s.useState)(""),u=Object(G.a)(o,2),i=u[0],l=u[1],b=Object(s.useState)(""),j=Object(G.a)(b,2),m=j[0],d=j[1],O=Object(s.useState)(""),p=Object(G.a)(O,2),h=p[0],N=p[1],U=Object(s.useState)(0),T=Object(G.a)(U,2),C=T[0],S=T[1],E=Object(s.useState)(0),k=Object(G.a)(E,2),I=k[0],w=k[1],D=Object(s.useState)(""),A=Object(G.a)(D,2),J=A[0],L=A[1],W=Object(s.useState)(!0),z=Object(G.a)(W,2),H=z[0],K=z[1],Q=Object(s.useState)(!0),V=Object(G.a)(Q,2),X=V[0],Y=V[1],Z=Object(s.useState)(!0),$=Object(G.a)(Z,2),ee=$[0],te=$[1],re=Object(s.useState)(!0),se=Object(G.a)(re,2),ce=se[0],ne=se[1],ae=Object(s.useState)(!0),oe=Object(G.a)(ae,2),ue=oe[0],ie=oe[1],le=function(){l(""),d(""),N(""),S(0),w(0)},be=function(e){e.preventDefault();var t=i.trim().length>0?(K(!0),!0):(K(!1),!1),r=m.trim().length>0?(Y(!0),!0):(Y(!1),!1),s=h.trim().length>0?(te(!0),!0):(te(!1),!1),a=C>0?(ne(!0),!0):(ne(!1),!1),o=I>0?(ie(!0),!0):(ie(!1),!1);if(t&&r&&s&&a&&o){var u={_id:String(+new Date),name:i,surname:m,desc:h,user_id:C,__v:I},l=[].concat(Object(P.a)(c),[u]);L(""),n(f(!1)),n(_(l)),R(u),le()}else L("Please enter correct data")},je=Object(s.useCallback)((function(e){e.preventDefault(),n(x(!1)),n(f(!1));var t=c.find((function(e){return e.user_id===r})),s=c.findIndex((function(e){return e.user_id===r}));t&&(i.trim().length>0&&(t.name=i),m.trim().length>0&&(t.surname=m),h.trim().length>0&&(t.desc=h),C>0&&(t.user_id=C),I>0&&(t.__v=I),c[s]=t,n(_(c)),B(r,t),le())}),[c,i,m,h,C,I,r,n]);return Object(q.jsx)("div",{className:M()("UserForm",{"UserForm--active":e||t}),children:Object(q.jsxs)("fieldset",{className:"UserForm__fieldset",children:[Object(q.jsx)("legend",{className:"UserForm__subtitle",children:"Enter iformation about the user"}),Object(q.jsx)("button",{type:"button",className:"UserForm__button-close",onClick:function(){n(f(!1)),n(x(!1))},children:"Close form without adding"}),Object(q.jsxs)("form",{method:"POST",className:"UserForm__form",children:[Object(q.jsxs)("div",{className:"UserForm__form--container-out",children:[Object(q.jsxs)("div",{className:"UserForm__form--container-in",children:[Object(q.jsxs)("div",{className:"UserForm__field",children:[Object(q.jsx)("p",{className:"UserForm__name",children:"Input name:"}),Object(q.jsx)("input",{className:"UserForm__input UserForm__input--name",type:"text",name:"name",placeholder:"name",value:i,onChange:function(e){return l(e.target.value)}})]}),H?Object(q.jsx)("p",{className:"UserForm__error"}):Object(q.jsx)("p",{className:"UserForm__error",children:J}),Object(q.jsxs)("div",{className:"UserForm__field",children:[Object(q.jsx)("p",{className:"UserForm__name",children:"Input surname:"}),Object(q.jsx)("input",{className:"UserForm__input UserForm__input--username",type:"text",name:"surname",placeholder:"username",value:m,onChange:function(e){return d(e.target.value)}})]}),X?Object(q.jsx)("p",{className:"UserForm__error"}):Object(q.jsx)("p",{className:"UserForm__error",children:J}),Object(q.jsxs)("div",{className:"UserForm__field",children:[Object(q.jsx)("p",{className:"UserForm__name",children:"Input description:"}),Object(q.jsx)("textarea",{className:"UserForm__input UserForm__input--desc",cols:30,name:"desc",placeholder:"...",value:h,onChange:function(e){return N(e.target.value)}})]}),ee?Object(q.jsx)("p",{className:"UserForm__error"}):Object(q.jsx)("p",{className:"UserForm__error",children:J})]}),Object(q.jsxs)("div",{className:"UserForm__form--container-in",children:[Object(q.jsxs)("div",{className:"UserForm__field",children:[Object(q.jsx)("p",{className:"UserForm__name",children:"Input ID of user:"}),Object(q.jsx)("input",{className:"UserForm__input UserForm__input--userId",type:"number",name:"userId",placeholder:"not used",readOnly:t,disabled:t,value:t?"":"".concat(C),onChange:function(e){return S(+e.target.value)}})]}),ce?Object(q.jsx)("p",{className:"UserForm__error"}):Object(q.jsx)("p",{className:"UserForm__error",children:J}),Object(q.jsxs)("div",{className:"UserForm__field",children:[Object(q.jsx)("p",{className:"UserForm__name",children:"Input version:"}),Object(q.jsx)("input",{className:"UserForm__input UserForm__input--version",type:"number",name:"version",placeholder:"245",required:!0,value:I,onChange:function(e){return w(+e.target.value)}})]}),ue?Object(q.jsx)("p",{className:"UserForm__error"}):Object(q.jsx)("p",{className:"UserForm__error",children:J})]})]}),Object(q.jsxs)("div",{className:"UserForm__buttons",children:[Object(q.jsx)("button",{type:"submit",className:M()("UserForm__button-add",{"UserForm__button-add--passive":t}),disabled:!e,onClick:function(e){return be(e)},children:"Add a new user"}),Object(q.jsx)("button",{type:"submit",className:M()("UserForm__button-add",{"UserForm__button-add--passive":e}),disabled:!t,onClick:function(e){return je(e)},children:"Correct the user"})]})]})]})})},W=function(){var e=Object(a.c)(v),t=Object(a.c)(T),r=Object(a.b)(),c=e.slice(t,t+5);Object(s.useEffect)((function(){c=e.slice(t,t+5)}),[]);var n=Object(s.useCallback)((function(t){A(t);var s=e.filter((function(e){return e.user_id!==t}));r(_(s))}),[r,e]),o=Object(s.useCallback)((function(t){e.find((function(e){return e.user_id===t}))&&(r(f(!1)),r(x(!0)),r(p(t)))}),[r,e]);return Object(q.jsx)(q.Fragment,{children:e.length>0&&c.map((function(e){return Object(q.jsxs)("tr",{className:"TableBody__body--row",children:[Object(q.jsxs)("td",{className:"TableBody__body--cell",children:[Object(q.jsx)("p",{className:"TableBody__body--text",children:e.name}),Object(q.jsx)("button",{className:"TableBody__body--button",type:"button",onClick:function(){return o(e.user_id)},children:"Correct user"})]}),Object(q.jsx)("td",{className:"TableBody__body--cell",children:e.surname}),Object(q.jsx)("td",{className:"TableBody__body--cell",children:e.desc}),Object(q.jsx)("td",{className:"TableBody__body--cell",children:Object(q.jsx)("button",{type:"button",className:"TableBody__body--button",onClick:function(){return n(e.user_id)},children:"Delete"})})]},e._id)}))})},z=function(){var e=Object(a.c)(v),t=Object(a.c)(T),r=Object(a.b)(),c=Object(s.useState)(!1),n=Object(G.a)(c,2),o=n[0],u=n[1],i=Object(s.useState)(!0),l=Object(G.a)(i,2),b=l[0],j=l[1],m=Object(s.useCallback)((function(){var s=t+5,c=e.length;s<c&&(r(N(s)),u(!1),j(!1)),s>=c-5&&u(!0)}),[r,e,t]),d=Object(s.useCallback)((function(){var e=t-5;e>=0&&(r(N(e)),j(!1),u(!1)),e<=0&&j(!0)}),[r,t]);return Object(q.jsx)(q.Fragment,{children:e.length>0?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("table",{className:"UserTable",children:[Object(q.jsx)("caption",{className:"UserTable__title",children:"Information about members of our cooperative"}),Object(q.jsx)("thead",{className:"UserTable__head",children:Object(q.jsxs)("tr",{className:"UserTable__head--row",children:[Object(q.jsx)("th",{className:"UserTable__head--cell",children:"Name"}),Object(q.jsx)("th",{className:"UserTable__head--cell",children:"Surname"}),Object(q.jsx)("th",{className:"UserTable__head--cell",children:"Description"}),Object(q.jsx)("th",{className:"UserTable__head--cell",children:"Delete"})]})}),Object(q.jsx)("tbody",{className:"UserTable__body",children:Object(q.jsx)(W,{})})]}),Object(q.jsxs)("div",{className:"UserTable__buttons",children:[Object(q.jsx)("button",{type:"button",className:"UserTable__button",disabled:b,onClick:d,children:"Previous 5"}),Object(q.jsx)("button",{type:"button",className:"UserTable__button",disabled:o,onClick:m,children:"Next 5"})]})]}):Object(q.jsx)("p",{className:"UserTable__error",children:"No information about users"})})},H=function(){var e=Object(a.c)(U),t=Object(a.c)(y),r=Object(a.c)(g),c=Object(a.b)(),n=Object(s.useCallback)((function(){c(f(!0)),c(x(!1))}),[c]);return Object(s.useEffect)((function(){function e(){return(e=Object(I.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:t=e.sent,c(_(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c(h("Can not load users"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(q.jsxs)("main",{className:"App",children:[Object(q.jsx)("h1",{className:"App__title",children:"Information about users of our products."}),Object(q.jsx)("button",{type:"button",className:"App__button App__button--opener",hidden:t||r,onClick:n,children:"Open form for user"}),0===e.length?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(L,{}),Object(q.jsx)(z,{})]}):Object(q.jsx)("p",{className:"App__error",children:e})]})},K=function(){return Object(q.jsx)(a.a,{store:S,children:Object(q.jsx)(H,{})})};n.a.render(Object(q.jsx)(K,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.a39250cb.chunk.js.map